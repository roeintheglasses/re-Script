"rrentEntry.mediaVersion = normalizeAdDuration(value.isDone);\n    if (generatorWrapper.isIphone) {\n      currentEntry.incrementPropertyGInBRepeated = 1;\n    } else {\n      currentEntry.incrementPropertyGInBRepeated = 0;\n    }\n    currentEntry.CustomMetric = value.handleThenable.entryIdCounter;\n    currentEntry.metricNames = value.handleAsync.entryIdCounter;\n    if (value.createDeferred > 0) {\n      currentEntry.assignSession = 1;\n    } else {\n      currentEntry.assignSession = 0;\n    }\n    currentEntry.audioToString = calculateTotalVisibility(value.entryIdCounter);\n    currentEntry.ssb = calculateTotalVisibility(value.toArray, false);\n    currentEntry.amtos = calculateMaxVisibility(value.entryIdCounter, false);\n    currentEntry.uac = generatorWrapper.isArrayLike;\n    currentEntry.vpt = value.setTimeoutWrapper.entryIdCounter;\n    if (entry == \"nio\") {\n      currentEntry.nio = 1;\n      currentEntry.adVerificationMeasurementSystem = \"nio\";\n    }\n    currentEntry.gmm = \"4\";\n    if (isAdTimeout(generatorWrapper, value.setTimeoutWrapper.entryIdCounter, true)) {\n      currentEntry.gdr = 1;\n    } else {\n      currentEntry.gdr = 0;\n    }\n    currentEntry.efpf = generatorWrapper.isSafari;\n    if (entry == \"gsv\" || entry == \"nis\") {\n      createCircularNode = generatorWrapper.globalObject;\n      if (createCircularNode.isDone > 0) {\n        currentEntry.nnutPlaceholder = createCircularNode.isDone;\n      }\n    }\n    currentEntry.timeCodeMethod = getAdPlaybackType(generatorWrapper);\n    currentEntry.networkMediaType = generatorWrapper.definePropertyPolyfill;\n    currentEntry.metricValidators = generatorWrapper.totalAdBufferingTime;\n    currentEntry.pixelAspectRatio = generatorWrapper.firstQuartileTime;\n    currentEntry.isVpaid = generatorWrapper.handleThenable;\n    currentEntry.duration = generatorWrapper.setTimeoutWrapper;\n    currentEntry.viewModeTime = generatorWrapper.resolvePromise;\n    currentEntry.screenDimensions = generatorWrapper.hasOwnPropertySafe.setTimeoutWrapper;\n    if (generatorWrapper.entryIdCounter.length >= 1) {\n      currentEntry.image0 = generatorWrapper.entryIdCounter[0].removeElementsByCondition;\n      currentEntry.attribute0 = [generatorWrapper.entryIdCounter[0].reduceElements];\n      currentEntry.coordinate0 = [generatorWrapper.entryIdCounter[0].zone];\n      currentEntry.subSample0 = [generatorWrapper.entryIdCounter[0].ta];\n      createCircularNode = generatorWrapper.entryIdCounter[0].position;\n      if (createCircularNode) {\n        currentEntry.position0 = getAdBoundsArray(createCircularNode);\n      } else {\n        currentEntry.position0 = undefined;\n      }\n    }\n    if (generatorWrapper.entryIdCounter.length >= 2) {\n      currentEntry.i1 = generatorWrapper.entryIdCounter[1].removeElementsByCondition;\n      currentEntry.a1 = generateImpressionDataArray(generatorWrapper.entryIdCounter[1].formatLongNumber, generatorWrapper.entryIdCounter[1].reduceElements, generatorWrapper.entryIdCounter[1].highOrderInteger);\n      currentEntry.c1 = generateImpressionDataArray(generatorWrapper.entryIdCounter[1].padNumber, generatorWrapper.entryIdCounter[1].zone, generatorWrapper.entryIdCounter[1].unusedVar1);\n      currentEntry.ss1 = generateImpressionDataArray(generatorWrapper.entryIdCounter[1].getFormattedNumber, generatorWrapper.entryIdCounter[1].ta, generatorWrapper.entryIdCounter[1].calculateIntegers);\n      createCircularNode = generatorWrapper.entryIdCounter[1].position;\n      if (createCircularNode) {\n        currentEntry.p1 = getAdBoundsArray(createCircularNode);\n      } else {\n        currentEntry.p1 = undefined;\n      }\n      currentEntry.mediaTimeOffset1 = generatorWrapper.entryIdCounter[1].parseAndSetBigIntegers;\n    }\n    if (generatorWrapper.entryIdCounter.length >= 3) {\n      currentEntry.i2 = generatorWrapper.entryIdCounter[2].removeElementsByCondition;\n      currentEntry.a2 = generateImpressionDataArray(generatorWrapper.entryIdCounter[2].formatLongNumber, generatorWrapper.entryIdCounter[2].reduceElements, generatorWrapper.entryIdCounter[2].highOrderInteger);\n      currentEntry.c2 = generateImpressionDataArray(generatorWrapper.entryIdCounter[2].padNumber, generatorWrapper.entryIdCounter[2].zone, generatorWrapper.entryIdCounter[2].unusedVar1);\n      currentEntry.ss2 = generateImpressionDataArray(generatorWrapper.entryIdCounter[2].getFormattedNumber, generatorWrapper.entryIdCounter[2].ta, generatorWrapper.entryIdCounter[2].calculateIntegers);\n      createCircularNode = generatorWrapper.entryIdCounter[2].position;\n      if (createCircularNode) {\n        currentEntry.p2 = getAdBoundsArray(createCircularNode);\n      } else {\n        currentEntry.p2 = undefined;\n      }\n      currentEntry.mtos2 = generatorWrapper.entryIdCounter[2].parseAndSetBigIntegers;\n    }\n    if (generatorWrapper.entryIdCounter.length >= 4) {\n      currentEntry.i3 = generatorWrapper.entryIdCounter[3].removeElementsByCondition;\n      currentEntry.a3 = generateImpressionDataArray(generatorWrapper.entryIdCounter[3].formatLongNumber, generatorWrapper.entryIdCounter[3].reduceElements, generatorWrapper.entryIdCounter[3].highOrderInteger);\n      currentEntry.c3 = generateImpressionDataArray(generatorWrapper.entryIdCounter[3].padNumber, generatorWrapper.entryIdCounter[3].zone, generatorWrapper.entryIdCounter[3].unusedVar1);\n      currentEntry.ss3 = generateImpressionDataArray(generatorWrapper.entryIdCounter[3].getFormattedNumber, generatorWrapper.entryIdCounter[3].ta, generatorWrapper.entryIdCounter[3].calculateIntegers);\n      createCircularNode = generatorWrapper.entryIdCounter[3].position;\n      if (createCircularNode) {\n        currentEntry.p3 = getAdBoundsArray(createCircularNode);\n      } else {\n        currentEntry.p3 = undefined;\n      }\n      currentEntry.mtos3 = generatorWrapper.entryIdCounter[3].parseAndSetBigIntegers;\n    }\n    currentEntry.checksum = statusRetriever(generatorWrapper.hasOwnPropertySafe);\n    if (value) {\n      currentEntry.browserFeatures = reportRetriever(generatorWrapper.hasOwnPropertySafe);\n      currentEntry.deviceViewport = value.setTimeoutWrapper.tasks;\n      currentEntry.deviceViewportScale = calculateAverageVisibility(value.tasks, 0.5);\n      currentEntry.deviceFullViewportScale = calculateAverageVisibility(value.tasks, 1);\n      currentEntry.defaultAudioVideoSync = calculateAverageVisibility(value.entryIdCounter, 0.5);\n      currentEntry.defaultAudioFrequencyVideoSync = calculateAverageVisibility(value.entryIdCounter, 1);\n      if (CustomMap) {\n        value.setTimeoutWrapper.tasks = 0;\n        resetVisibilityMetrics(value.tasks);\n        resetVisibilityMetrics(value.entryIdCounter);\n      }\n      if (generatorWrapper.removeUniqueId()) {\n        currentEntry.deviceTotalOffsetScale = value.handleThenable;\n        currentEntry.defaultAudioVideo = value.dispatchUnhandledRejection;\n        currentEntry.deviceTotalOffsetScaleSum = generatorWrapper.customProperty2 + 1;\n        if (CustomMap) {\n          value.handleThenable = 0;\n          value.dispatchUnhandledRejection = 0;\n          generatorWrapper.customProperty2++;\n        }\n      }\n      currentEntry.deviceAdTime = value.handleAsync.tasks;\n      currentEntry.deviceFullScreenTime = value.handleThenable.tasks;\n      if (CustomMap) {\n        value.handleAsync.tasks = 0;\n        value.handleThenable.tasks = 0;\n      }\n    }\n    currentEntry.removeRelatedAdContainers = [entryIdCounter.createDeferred.width, entryIdCounter.createDeferred.height];\n    currentEntry.browserSize = [entryIdCounter.entryIdCounter.getRectangleWidth(), entryIdCounter.entryIdCounter.getRectangleHeight()];\n    currentEntry.screenSize = [entryIdCounter.handleAsync.width, entryIdCounter.handleAsync.height];\n    currentEntry.domain = entryIdCounter.domain;\n    if (generatorWrapper.Nb) {\n      currentEntry.videoDataStream = generatorWrapper.Nb;\n    }\n    if (generatorWrapper.isDone.length > 0 || generatorWrapper.partialFunctionApplication) {\n      value = copyArray(generatorWrapper.isDone);\n      if (generatorWrapper.partialFunctionApplication) {\n        value.push(generatorWrapper.partialFunctionApplication);\n      }\n      currentEntry.pingsArray = mapElements(value, function (foundEntry) {\n        return foundEntry.toString();\n      });\n    }\n    value = mapElements(filterElements(generatorWrapper.isDone, function (foundEntry) {\n      return foundEntry.isDone();\n    }), function (foundEntry) {\n      return foundEntry.getAdId();\n    });\n    uniqueElements(value);\n    currentEntry.checksumEntities = value;\n    if (generatorWrapper.tasks) {\n      currentEntry.videoMergeError = generatorWrapper.tasks;\n    }\n    if (generatorWrapper.dispatchUnhandledRejection) {\n      currentEntry.videoMergeMark = generatorWrapper.dispatchUnhandledRejection;\n    }\n    if (generatorWrapper.tryCall) {\n      currentEntry.videoMergeIEC = generatorWrapper.tryCall;\n    }\n    if (generatorWrapper.globalObject) {\n      currentEntry.adVerificationMeasurementSystem = generatorWrapper.globalObject.getAdName();\n    } else {\n      currentEntry.adVerificationMeasurementSystem = \"ns\";\n    }\n    if (generatorWrapper.globalObject) {\n      extendObject(currentEntry, generatorWrapper.globalObject.encodeString());\n    }\n    if (findEntry) {\n      currentEntry.CustomMap = roundToPrecision(generatorWrapper.adData.zone, 2);\n      currentEntry.safeSelector = roundToPrecision(generatorWrapper.adData.ta, 2);\n    } else {\n      currentEntry.totalTimeHeld = accumulatePosition() - yearOffset;\n    }\n    currentEntry.isEdge = roundToPrecision(value.resolvePromise, 2);\n    currentEntry.isGecko = roundToPrecision(value.onFulfilled, 2);\n    currentEntry.mediaVersion = normalizeAdDuration(value.isDone);\n    currentEntry.networkVersion = normalizeAdDuration(value.createDeferred);\n    currentEntry.latestTimeElapsed = roundToPrecision(generatorWrapper.set34Clear14557Flag, 2);\n    findEntry = getAdEventByIndex(generatorWrapper, iterateEntries);\n    getMaxVisibility(value);\n    currentEntry.qualityMediaTotalOffsetScale = getMaxVisibility(findEntry);\n    currentEntry.qualityNetworkChecksum = roundToPrecision(findEntry.onFulfilled, 2);\n    currentEntry.qualityMediaVersion = normalizeAdDuration(findEntry.isDone);\n    currentEntry.qualityNetworkVersion = normalizeAdDuration(findEntry.createDeferred);\n    if (findEntry.createDeferred > 0) {\n      currentEntry.qualityAdScore = 1;\n    } else {\n      currentEntry.qualityAdScore = 0;\n    }\n    currentEntry.getTopMostAccessibleWindow = generatorWrapper.constructReflect;\n    if (!currentEntry.adVerificationMeasurementSystem) {\n      currentEntry.adVerificationMeasurementSystem = \"geo\";\n    }\n    currentEntry.playerSizeMethod = value.updateMaxSize.entryIdCounter;\n    currentEntry.playerSizeValue = value.updateMaxSize.getAdStateValue();\n    currentEntry.playerSizeFullValue = value.definePropertyPolyfill.getAdStateValue();\n    currentEntry.playerSizeAttribute = value.createIterator.getAdStateValue();\n    key = serializeAdStates(key.AdEnvironmentConfig);\n    if (key.length) {\n      currentEntry.videoElementId = key;\n    }\n    if (generatorWrapper.createDeferred) {\n      extendObject(currentEntry, getPerformanceData(generatorWrapper.createDeferred));\n    }\n    currentEntry.adVerificationAdSystem = generatorWrapper.isIos();\n    currentEntry.filterAndLinkAdContainers = generatorWrapper.identityFunction();\n    currentEntry.ensureQueryIdAdState = zeroReset(generatorWrapper);\n    return currentEntry;\n  };\n  var verifyRequest = function (generatorWrapper, value) {\n    if (containsElement(httpProtocol, value)) {\n      return true;\n    }\n    var CustomMap = generatorWrapper.keyArray[value];\n    if (undefined !== CustomMap) {\n      generatorWrapper.keyArray[value] = true;\n      return !CustomMap;\n    } else {\n      return false;\n    }\n  };\n  AdProcessor.prototype.identityFunction = function () {\n    if (this.uniqueIdCounter) {\n      return 2;\n    } else {\n      if (checkAdQueueTimeout(this)) {\n        return 5;\n      } else {\n        if (this.removeUniqueId()) {\n          return 4;\n        } else {\n          return 3;\n        }\n      }\n    }\n  };\n  AdProcessor.prototype.isIos = function () {\n    if (this.sliceArguments) {\n      if (this.getAdManager().handleAsync.setTimeoutWrapper >= 2000) {\n        return 4;\n      } else {\n        return 3;\n      }\n    } else {\n      return 2;\n    }\n  };\n  var zeroReset = function (generatorWrapper) {\n    var value = generatorWrapper.year.toString(10).padStart(2, \"0\");\n    value = \"\" + generatorWrapper.isFirefox + value;\n    if (generatorWrapper.year < 99) {\n      generatorWrapper.year++;\n    }\n    return value;\n  };\n  var currentDate = Date.now();\n  var checksum = function () {\n    this.entryIdCounter = {};\n    var generatorWrapper = getWindowForDocument();\n    assignSession(this, generatorWrapper, document);\n    var value = browserSize();\n    try {\n      if (value == \"1\") {\n        for (var CustomMap = generatorWrapper.parent; CustomMap != generatorWrapper.top; CustomMap = CustomMap.parent) {\n          assignSession(this, CustomMap, CustomMap.document);\n        }\n        assignSession(this, generatorWrapper.top, generatorWrapper.top.document);\n      }\n    } catch (findEntry) {}\n  };\n  var browserSize = function () {\n    var generatorWrapper = document.documentElement;\n    try {\n      if (!isAccessibleFrame(getWindowForDocument().top)) {\n        return \"2\";\n      }\n      var value = [];\n      var CustomMap = getWindowForDocument(generatorWrapper.ownerDocument);\n      for (generatorWrapper = CustomMap; generatorWrapper != CustomMap.top; generatorWrapper = generatorWrapper.parent) {\n        if (generatorWrapper.frameElement) {\n          value.push(generatorWrapper.frameElement);\n        } else {\n          break;\n        }\n      }\n      if (value && value.length != 0) {\n        return \"1\";\n      } else {\n        return \"0\";\n      }\n    } catch (findEntry) {\n      return \"2\";\n    }\n  };\n  var assignSession = function (generatorWrapper, value, CustomMap) {\n    addEventListenerWithCapture(CustomMap, \"mousedown\", function () {\n      return incrementPropertyL(generatorWrapper);\n    }, 301);\n    addEventListenerWithCapture(value, \"scroll\", function () {\n      return incrementPropertyGInB(generatorWrapper);\n    }, 302);\n    addEventListenerWithCapture(CustomMap, \"touchmove\", function () {\n      return incrementPropertyGInBRepeated(generatorWrapper);\n    }, 303);\n    addEventListenerWithCapture(CustomMap, \"mousemove\", function () {\n      return incrementPropertyO(generatorWrapper);\n    }, 304);\n    addEventListenerWithCapture(CustomMap, \"keydown\", function () {\n      return incrementPropertyJ(generatorWrapper);\n    }, 305);\n  };\n  var incrementPropertyL = function (generatorWrapper) {\n    forEachInObject(generatorWrapper.entryIdCounter, function (value) {\n      if (!(value.setTimeoutWrapper > 100000)) {\n        ++value.setTimeoutWrapper;\n      }\n    });\n  };\n  var incrementPropertyGInB = function (generatorWrapper) {\n    forEachInObject(generatorWrapper.entryIdCounter, function (value) {\n      if (!(value.entryIdCounter > 100000)) {\n        ++value.entryIdCounter;\n      }\n    });\n  };\n  var incrementPropertyGInBRepeated = function (generatorWrapper) {\n    forEachInObject(generatorWrapper.entryIdCounter, function (value) {\n      if (!(value.entryIdCounter > 100000)) {\n        ++value.entryIdCounter;\n      }\n    });\n  };\n  var incrementPropertyJ = function (generatorWrapper) {\n    forEachInObject(generatorWrapper.entryIdCounter, function (value) {\n      if (!(value.tasks > 100000)) {\n        ++value.tasks;\n      }\n    });\n  };\n  var incrementPropertyO = function (generatorWrapper) {\n    forEachInObject(generatorWrapper.entryIdCounter, function (value) {\n      if (!(value.createDeferred > 100000)) {\n        ++value.createDeferred;\n      }\n    });\n  };\n  var screenDimensions = function () {\n    this.entryIdCounter = [];\n    this.tasks = [];\n  };\n  var findAdContainerByNa = function (generatorWrapper, value) {\n    return findElement(generatorWrapper.entryIdCounter, function (CustomMap) {\n      return CustomMap.constructReflect == value;\n    });\n  };\n  var findAdContainerByNb = function (generatorWrapper, value) {\n    if (value) {\n      return findElement(generatorWrapper.entryIdCounter, function (CustomMap) {\n        return CustomMap.setPrototypeOfPolyfill.trimString == value;\n      });\n    } else {\n      return null;\n    }\n  };\n  var findAdContainerByNaAndType2 = function (generatorWrapper, value) {\n    return findElement(generatorWrapper.tasks, function (CustomMap) {\n      return CustomMap.generatorYield() == 2 && CustomMap.constructReflect == value;\n    });\n  };\n  var mergeAdContainerArrays = function () {\n    var generatorWrapper = globalAdContainersManager;\n    if (generatorWrapper.entryIdCounter.length == 0) {\n      return generatorWrapper.tasks;\n    } else {\n      if (generatorWrapper.tasks.length == 0) {\n        return generatorWrapper.entryIdCounter;\n      } else {\n        return concatArrays(generatorWrapper.tasks, generatorWrapper.entryIdCounter);\n      }\n    }\n  };\n  screenDimensions.prototype.resetAdStateController = function () {\n    this.entryIdCounter = [];\n    this.tasks = [];\n  };\n  var removeAdContainer = function (generatorWrapper, value) {\n    if (value.generatorYield() == 1) {\n      generatorWrapper = generatorWrapper.entryIdCounter;\n    } else {\n      generatorWrapper = generatorWrapper.tasks;\n    }\n    var CustomMap = findElementIndex(generatorWrapper, function (findEntry) {\n      return findEntry == value;\n    });\n    if (-1 != CustomMap) {\n      generatorWrapper.splice(CustomMap, 1);\n      if (value.globalObject) {\n        value.globalObject.isOpera();\n      }\n      value.markAsCompleted();\n      return true;\n    } else {\n      return false;\n    }\n  };\n  var removeRelatedAdContainers = function (generatorWrapper) {\n    var value = globalAdContainersManager;\n    if (removeAdContainer(value, generatorWrapper)) {\n      switch (generatorWrapper.generatorYield()) {\n        case 0:\n          var CustomMap = function () {\n            return null;\n          };\n        case 2:\n          CustomMap = function () {\n            return findAdContainerByNaAndType2(value, generatorWrapper.constructReflect);\n          };\n          break;\n        case 1:\n          CustomMap = function () {\n            return findAdContainerByNa(value, generatorWrapper.constructReflect);\n          };\n      }\n      for (var findEntry = CustomMap(); findEntry; findEntry = CustomMap()) {\n        removeAdContainer(value, findEntry);\n      }\n    }\n  };\n  var addUniqueAdContainers = function (generatorWrapper) {\n    var value = globalAdContainersManager;\n    generatorWrapper = filterElements(generatorWrapper, function (CustomMap) {\n      return !findAdContainerByNb(value, CustomMap.setPrototypeOfPolyfill.trimString);\n    });\n    value.entryIdCounter.push.apply(value.entryIdCounter, toArray(generatorWrapper));\n  };\n  var addBatchAdContainers = function (generatorWrapper) {\n    var value = [];\n    forEachElement(generatorWrapper, function (CustomMap) {\n      if (!someElement(globalAdContainersManager.entryIdCounter, function (findEntry) {\n        return findEntry.setPrototypeOfPolyfill.trimString === CustomMap.setPrototypeOfPolyfill.trimString && findEntry.constructReflect === CustomMap.constructReflect;\n      })) {\n        globalAdContainersManager.entryIdCounter.push(CustomMap);\n        value.push(CustomMap);\n      }\n    });\n  };\n  var globalAdContainersManager = getSingletonInstance(screenDimensions);\n  var AdInitializationState = function () {\n    this.entryIdCounter = this.tasks = null;\n  };\n  var initializeAdContainer = function (generatorWrapper, value) {\n    if (generatorWrapper.tasks == null) {\n      return false;\n    }\n    var CustomMap = function (findEntry, iterateEntries) {\n      value(findEntry, iterateEntries);\n    };\n    generatorWrapper.entryIdCounter = findElement(generatorWrapper.tasks, function (findEntry) {\n      return findEntry != null && findEntry.isPositiveInt64();\n    });\n    if (generatorWrapper.entryIdCounter) {\n      if (generatorWrapper.entryIdCounter.initialize(CustomMap)) {\n        refreshAdEnvironment(generatorWrapper.entryIdCounter.entryIdCounter);\n      } else {\n        value(generatorWrapper.entryIdCounter.entryIdCounter.isChromiumBased(), generatorWrapper.entryIdCounter);\n      }\n    }\n    return generatorWrapper.entryIdCounter != null;\n  };\n  var AdLoader = function (generatorWrapper) {\n    generatorWrapper = filterAndLinkAdContainers(generatorWrapper);\n    AdCreator.call(this, generatorWrapper.length ? generatorWrapper[generatorWrapper.length - 1] : new AdController(window, 0));\n    this.setTimeoutWrapper = generatorWrapper;\n    this.tasks = null;\n  };\n  inheritPrototype(AdLoader, AdCreator);\n  setTimeoutWrapper = AdLoader.prototype;\n  setTimeoutWrapper.getAdName = function () {\n    return (this.tasks ? this.tasks : this.entryIdCounter).getAdName();\n  };\n  setTimeoutWrapper.encodeString = function () {\n    return (this.tasks ? this.tasks : this.entryIdCounter).encodeString();\n  };\n  setTimeoutWrapper.uniqueIdProperty = function () {\n    return (this.tasks ? this.tasks : this.entryIdCounter).uniqueIdProperty();\n  };\n  setTimeoutWrapper.initialize = function (generatorWrapper) {\n    var value = false;\n    forEachElement(this.setTimeoutWrapper, function (CustomMap) {\n      if (CustomMap.initializeMraid()) {\n        value = true;\n      }\n    });\n    if (value) {\n      this.createDeferred = generatorWrapper;\n      registerAdComponent(this.entryIdCounter, this);\n    }\n    return value;\n  };\n  setTimeoutWrapper.markAsCompleted = function () {\n    forEachElement(this.setTimeoutWrapper, function (generatorWrapper) {\n      generatorWrapper.markAsCompleted();\n    });\n    AdCreator.prototype.markAsCompleted.call(this);\n  };\n  setTimeoutWrapper.isPositiveInt64 = function () {\n    return someElement(this.setTimeoutWrapper, function (generatorWrapper) {\n      return generatorWrapper.handleThenable();\n    });\n  };\n  setTimeoutWrapper.checkIntersectionObserverSupport = function () {\n    return someElement(this.setTimeoutWrapper, function (generatorWrapper) {\n      return generatorWrapper.handleThenable();\n    });\n  };\n  setTimeoutWrapper.isIE = function (generatorWrapper, value, CustomMap) {\n    return new coordinateResponder(generatorWrapper, this.entryIdCounter, value, CustomMap);\n  };\n  setTimeoutWrapper.deferError = function (generatorWrapper) {\n    this.tasks = generatorWrapper.tasks;\n  };\n  var filterAndLinkAdContainers = function (generatorWrapper) {\n    if (!generatorWrapper.length) {\n      return [];\n    }\n    generatorWrapper = filterElements(generatorWrapper, function (CustomMap) {\n      return CustomMap != null && CustomMap.handleThenable();\n    });\n    for (var value = 1; value < generatorWrapper.length; value++) {\n      registerAdComponent(generatorWrapper[value - 1], generatorWrapper[value]);\n    }\n    return generatorWrapper;\n  };\n  var intersectionObserverOptions = {\n    threshold: [0, 0.3, 0.5, 0.75, 1]\n  };\n  var AdVisibilityMonitor = function (generatorWrapper, value, CustomMap, findEntry) {\n    AdComponent.call(this, generatorWrapper, value, CustomMap, findEntry);\n    this.dispatchUnhandledRejection = this.executeCallbacks = this.isDone = this.onFulfilled = this.createDeferred = null;\n  };\n  inheritPrototype(AdVisibilityMonitor, coordinateResponder);\n  AdVisibilityMonitor.prototype.writeFieldHeader = function () {\n    var generatorWrapper = this;\n    if (!this.dispatchUnhandledRejection) {\n      this.dispatchUnhandledRejection = accumulatePosition();\n    }\n    if (So(298, function () {\n      return setupAdVisibilityMonitoring(generatorWrapper);\n    })) {\n      return true;\n    }\n    activateAdController(this.tasks, \"msf\");\n    return false;\n  };\n  AdVisibilityMonitor.prototype.isOpera = function () {\n    if (this.createDeferred && this.setTimeoutWrapper) {\n      try {\n        this.createDeferred.unobserve(this.setTimeoutWrapper);\n        if (this.onFulfilled) {\n          this.onFulfilled.unobserve(this.setTimeoutWrapper);\n          this.onFulfilled = null;\n        } else if (this.isDone) {\n          this.isDone.disconnect();\n          this.isDone = null;\n        }\n      } catch (generatorWrapper) {}\n    }\n  };\n  var getIntersectionObserverRecords = function (generatorWrapper) {\n    if (generatorWrapper.createDeferred && generatorWrapper.createDeferred.takeRecords) {\n      return generatorWrapper.createDeferred.takeRecords();\n    } else {\n      return [];\n    }\n  };\n  var setupAdVisibilityMonitoring = function (generatorWrapper) {\n    if (!generatorWrapper.setTimeoutWrapper) {\n      return false;\n    }\n    var value = generatorWrapper.setTimeoutWrapper;\n    var CustomMap = generatorWrapper.tasks.entryIdCounter.setTimeoutWrapper;\n    var findEntry = getAdEnvironment().entryIdCounter.entryIdCounter;\n    generatorWrapper.createDeferred = new CustomMap.IntersectionObserver(MonitorFunction(findEntry, function (iterateEntries) {\n      return handleVisibilityChange(generatorWrapper, iterateEntries);\n    }), intersectionObserverOptions);\n    findEntry = MonitorFunction(findEntry, function () {\n      generatorWrapper.createDeferred.unobserve(value);\n      generatorWrapper.createDeferred.observe(value);\n      handleVisibilityChange(generatorWrapper, getIntersectionObserverRecords(generatorWrapper));\n    });\n    if (CustomMap.ResizeObserver) {\n      generatorWrapper.onFulfilled = new CustomMap.ResizeObserver(findEntry);\n      generatorWrapper.onFulfilled.observe(value);\n    } else if (CustomMap.MutationObserver) {\n      generatorWrapper.isDone = new globalScope.MutationObserver(findEntry);\n      generatorWrapper.isDone.observe(value, {\n        attributes: true,\n        childList: true,\n        characterData: true,\n        subtree: true\n      });\n    }\n    generatorWrapper.createDeferred.observe(value);\n    handleVisibilityChange(generatorWrapper, getIntersectionObserverRecords(generatorWrapper));\n    return true;\n  };\n  var handleVisibilityChange = function (generatorWrapper, value) {\n    try {\n      if (value.length) {\n        if (!generatorWrapper.executeCallbacks) {\n          generatorWrapper.executeCallbacks = accumulatePosition();\n        }\n        var CustomMap = getMostRecentEntry(value);\n        var findEntry = calculateFrameOffset(generatorWrapper.setTimeoutWrapper, generatorWrapper.tasks.entryIdCounter.setTimeoutWrapper);\n        var iterateEntries = findEntry.inheritPrototype;\n        var createCircularNode = findEntry.globalScope;\n        generatorWrapper.entryIdCounter = new handleThenable(Math.roundRectangle(createCircularNode), Math.roundRectangle(iterateEntries) + CustomMap.boundingClientRect.width, Math.roundRectangle(createCircularNode) + CustomMap.boundingClientRect.height, Math.roundRectangle(iterateEntries));\n        var entryIdCounter = convertRectToBox(CustomMap.intersectionRect);\n        generatorWrapper.handleAsync = translateRectangle(entryIdCounter, generatorWrapper.entryIdCounter.left - entryIdCounter.left, generatorWrapper.entryIdCounter.top - entryIdCounter.top);\n      }\n    } catch (key) {\n      generatorWrapper.isOpera();\n      logError(299, key);\n    }\n  };\n  var getMostRecentEntry = function (generatorWrapper) {\n    return reduceElements(generatorWrapper, function (value, CustomMap) {\n      if (value.time > CustomMap.time) {\n        return value;\n      } else {\n        return CustomMap;\n      }\n    }, generatorWrapper[0]);\n  };\n  setTimeoutWrapper = AdVisibilityMonitor.prototype;\n  setTimeoutWrapper.CustomError = function () {\n    var generatorWrapper = getIntersectionObserverRecords(this);\n    if (generatorWrapper.length > 0) {\n      handleVisibilityChange(this, generatorWrapper);\n    }\n    coordinateResponder.prototype.CustomError.call(this);\n  };\n  setTimeoutWrapper.writeBytesField = function () {};\n  setTimeoutWrapper.EnsureMutable = function () {\n    return false;\n  };\n  setTimeoutWrapper.getStringOrEmpty = function () {};\n  setTimeoutWrapper.encodeString = function () {\n    var generatorWrapper = {};\n    return Object.assign(this.tasks.encodeString(), (generatorWrapper.niot_obs = this.dispatchUnhandledRejection, generatorWrapper.niot_cbk = this.executeCallbacks, generatorWrapper));\n  };\n  setTimeoutWrapper.getAdName = function () {\n    return \"nio\";\n  };\n  var AdVisibilityProvider = function (generatorWrapper) {\n    if (undefined === generatorWrapper) {\n      generatorWrapper = window;\n    } else {\n      generatorWrapper = generatorWrapper;\n    }\n    AdCreator.call(this, new AdController(generatorWrapper, 2));\n  };\n  inheritPrototype(AdVisibilityProvider, AdCreator);\n  AdVisibilityProvider.prototype.getAdName = function () {\n    return \"nio\";\n  };\n  AdVisibilityProvider.prototype.checkIntersectionObserverSupport = function () {\n    return !getAdEnvironmentInstance().tasks && this.entryIdCounter.entryIdCounter.setTimeoutWrapper.IntersectionObserver != null;\n  };\n  AdVisibilityProvider.prototype.isIE = function (generatorWrapper, value, CustomMap) {\n    return new AdVisibilityMonitor(generatorWrapper, this.entryIdCounter, value, CustomMap);\n  };\n  var GeoLocationProvider = function () {\n    var generatorWrapper = getGeoFlag();\n    AdController.call(this, window.top, generatorWrapper, \"geo\");\n  };\n  inheritPrototype(GeoLocationProvider, AdController);\n  GeoLocationProvider.prototype.definePropertyPolyfill = function () {\n    return getAdEnvironmentInstance().entryIdCounter;\n  };\n  GeoLocationProvider.prototype.handleThenable = function () {\n    var generatorWrapper = getGeoFlag();\n    if (this.executeCallbacks !== generatorWrapper) {\n      if (this.entryIdCounter != this && generatorWrapper > this.entryIdCounter.executeCallbacks) {\n        this.entryIdCounter = this;\n        updateAdComponents(this);\n      }\n      this.executeCallbacks = generatorWrapper;\n    }\n    return generatorWrapper == 2;\n  };\n  var getGeoFlag = function () {\n    getAdEnvironment();\n    var generatorWrapper = getAdEnvironmentInstance();\n    if (generatorWrapper.setTimeoutWrapper || generatorWrapper.tasks) {\n      return 0;\n    } else {\n      return 2;\n    }\n  };\n  var EmptyClass = function () {};\n  var initAdRequestManager = function () {\n    this.done = false;\n    this.entryIdCounter = {\n      getAdElementProperty: 0,\n      createObjectOrUndefined: 0,\n      formatErrorMessage: 0,\n      zeroValueArrayCache: 0,\n      setFlag32: -1,\n      clearAdProperty: 0,\n      setAdPropertyFromObject: 0,\n      sanitizeAdElementData: 0,\n      MraidMethods: 0\n    };\n    this.handleAsync = null;\n    this.isDone = false;\n    this.setTimeoutWrapper = null;\n    this.onFulfilled = 0;\n    this.tasks = new AdSampling(this);\n  };\n  var startSampling = function () {\n    var generatorWrapper = adRequestManager;\n    if (!generatorWrapper.isDone) {\n      generatorWrapper.isDone = true;\n      setupSamplingEvent(generatorWrapper, function () {\n        return generatorWrapper.createDeferred.apply(generatorWrapper, toArray(sliceArguments.apply(0, arguments)));\n      });\n      generatorWrapper.createDeferred();\n    }\n  };\n  initAdRequestManager.prototype.performSample = function () {\n    processSamples(this, mergeAdContainerArrays(), false);\n  };\n  var resetGlobalState = function () {\n    getSingletonInstance(EmptyClass);\n    var generatorWrapper = getSingletonInstance(AdInitializationState);\n    if (generatorWrapper.entryIdCounter != null && generatorWrapper.entryIdCounter.entryIdCounter) {\n      refreshAdEnvironment(generatorWrapper.entryIdCounter.entryIdCounter);\n    } else {\n      initializeAdEnvironment(getAdEnvironmentInstance());\n    }\n  };\n  var processSamples = function (generatorWrapper, value, CustomMap) {\n    if (!generatorWrapper.done && (generatorWrapper.tasks.cancel(), value.length != 0)) {\n      generatorWrapper.setTimeoutWrapper = null;\n      try {\n        resetGlobalState();\n        var findEntry = accumulatePosition();\n        getAdEnvironment().handleAsync = findEntry;\n        if (getSingletonInstance(AdInitializationState).entryIdCounter != null) {\n          for (var iterateEntries = 0; iterateEntries < value.length; iterateEntries++) {\n            updateAdContainerState(value[iterateEntries], findEntry, CustomMap);\n          }\n        }\n        for (findEntry = 0; findEntry < value.length; findEntry++) {\n          processAdContainerMetrics(value[findEntry]);\n        }\n        ++generatorWrapper.entryIdCounter.zeroValueArrayCache;\n      } finally {\n        if (CustomMap) {\n          forEachElement(value, function (createCircularNode) {\n            createCircularNode.adData.zone = 0;\n          });\n        } else {\n          startAdSampling(generatorWrapper.tasks);\n        }\n      }\n    }\n  };\n  var setupSamplingEvent = function (generatorWrapper, value) {\n    if (!generatorWrapper.handleAsync) {\n      value = To(142, value);\n      GetEnvironment();\n      var CustomMap = getVisibilityChangeEventName(document);\n      if (CustomMap && addEventListenerWithNormalization(document, CustomMap, value, {\n        capture: false\n      })) {\n        generatorWrapper.handleAsync = value;\n      }\n    }\n  };\n  initAdRequestManager.prototype.createDeferred = function () {\n    var generatorWrapper = isAdPlayingOrMuted();\n    var value = accumulatePosition();\n    if (generatorWrapper) {\n      if (!$o) {\n        Wo = value;\n        forEachElement(globalAdContainersManager.entryIdCounter, function (CustomMap) {\n          var findEntry = CustomMap.getAdManager();\n          findEntry.totalAdBufferingTime = widthRetriever(findEntry, value, CustomMap.createObjectPolyfill != 1);\n        });\n      }\n      $o = true;\n    } else {\n      this.onFulfilled = generateTargetingValues(this, value);\n      $o = false;\n      yearOffset = value;\n      forEachElement(globalAdContainersManager.entryIdCounter, function (CustomMap) {\n        if (CustomMap.findElementIndex) {\n          CustomMap.getAdManager().settlePromise = value;\n        }\n      });\n    }\n    processSamples(this, mergeAdContainerArrays(), !generatorWrapper);\n  };\n  var processAllSamples = function () {\n    var generatorWrapper = getSingletonInstance(AdInitializationState);\n    if (generatorWrapper.entryIdCounter != null) {\n      var value = generatorWrapper.entryIdCounter;\n      forEachElement(mergeAdContainerArrays(), function (CustomMap) {\n        return replaceAdContainerContent(CustomMap, value);\n      });\n    }\n  };\n  var generateTargetingValues = function (generatorWrapper, value) {\n    generatorWrapper = generatorWrapper.onFulfilled;\n    if ($o) {\n      generatorWrapper += value - Wo;\n    }\n    return generatorWrapper;\n  };\n  var initializeErrorHandling = function (generatorWrapper) {\n    if (undefined === generatorWrapper) {\n      generatorWrapper = function () {\n        return {};\n      };\n    } else {\n      generatorWrapper = generatorWrapper;\n    }\n    Po.parseBooleanOrNumber(\"av-js\");\n    Lo.entryIdCounter = 0.01;\n    Ro([function (value) {\n      var CustomMap = getAdEnvironment();\n      var findEntry = {};\n      findEntry = (findEntry.bin = CustomMap.tasks, findEntry.type = \"error\", findEntry);\n      CustomMap = getAllAdStates(CustomMap.AdEnvironmentConfig);\n      if (!adRequestManager.setTimeoutWrapper) {\n        var iterateEntries = adRequestManager;\n        var createCircularNode = window.document;\n        var entryIdCounter = Xo >= 0 ? accumulatePosition() - Xo : -1;\n        var key = accumulatePosition();\n        if (-1 == iterateEntries.entryIdCounter.setFlag32) {\n          entryIdCounter = key;\n        }\n        var value = getAdEnvironmentInstance();\n        var entry = getAdEnvironment();\n        var currentEntry = getAllAdStates(entry.AdEnvironmentConfig);\n        var foundEntry = mergeAdContainerArrays();\n        try {\n          if (foundEntry.length > 0) {\n            var resolveFunction = value.entryIdCounter;\n            if (resolveFunction) {\n              currentEntry.browserSize = [resolveFunction.getRectangleWidth(), resolveFunction.getRectangleHeight()];\n            }\n            var rejectFunction = value.createDeferred;\n            if (rejectFunction) {\n              currentEntry.removeRelatedAdContainers = [rejectFunction.width, rejectFunction.height];\n            }\n            if (window.screen) {\n              currentEntry.screenSize = [window.screen.width, window.screen.height];\n            }\n          } else {\n            currentEntry.url = encodeURIComponent(window.location.href.substring(0, 512));\n            if (createCircularNode.referrer) {\n              currentEntry.referrer = encodeURIComponent(createCircularNode.referrer.substring(0, 512));\n            }\n          }\n          currentEntry.setupMraid = entryIdCounter;\n          currentEntry.NativeViewabilityService = Xo;\n          currentEntry.bin = entry.tasks;\n          if (undefined !== window.google_osd_load_pub_page_exp) {\n            currentEntry.olpp = window.google_osd_load_pub_page_exp;\n          }\n          currentEntry.debugInfoArray = [1, iterateEntries.entryIdCounter.getAdElementProperty, iterateEntries.entryIdCounter.createObjectOrUndefined, iterateEntries.entryIdCounter.zeroValueArrayCache, iterateEntries.entryIdCounter.setFlag32, 0, iterateEntries.tasks.tasks, iterateEntries.entryIdCounter.clearAdProperty, iterateEntries.entryIdCounter.setAdPropertyFromObject, iterateEntries.entryIdCounter.sanitizeAdElementData, iterateEntries.entryIdCounter.MraidMethods, -1].join(\";\");\n          currentEntry.setTargetingValues = generateTargetingValues(iterateEntries, key);\n          if (value.tasks) {\n            currentEntry.isInApp = 1;\n          }\n          if (window !== null && window != window.top) {\n            if (foundEntry.length > 0) {\n              currentEntry.iframeLocation = encodeURIComponent(window.location.href.substring(0, 512));\n            }\n            var user = value.settlePromise;\n            currentEntry.screenDimensions = [user.getRectangleWidth(), user.getRectangleHeight()];\n          }\n        } catch (isDone) {\n          currentEntry.hasError = 1;\n        }\n        adRequestManager.setTimeoutWrapper = currentEntry;\n      }\n      rejectFunction = adRequestManager.setTimeoutWrapper;\n      resolveFunction = {};\n      for (var profileData in rejectFunction) resolveFunction[profileData] = rejectFunction[profileData];\n      profileData = getAdEnvironment().entryIdCounter;\n      if (getAdState(profileData.setTimeoutWrapper, \"prf\") == 1) {\n        rejectFunction = new AdConfig();\n        user = profileData.entryIdCounter;\n        iterateEntries = 0;\n        if (-1 < user.entryIdCounter) {\n          iterateEntries = user.setTimeoutWrapper.entryIdCounter.now() - user.entryIdCounter;\n        }\n        user = user.createDeferred + iterateEntries;\n        if (user != null && typeof user !== \"number\") {\n          throw Error(\"Value of float/double field must be a number, found \" + typeof user + \": \" + user);\n        }\n        rejectFunction = updateOrRemoveElement(rejectFunction, 1, user, 0);\n        user = profileData.entryIdCounter;\n        rejectFunction = modifyAdProperty(rejectFunction, 5, -1 < user.entryIdCounter ? user.tasks + 1 : user.tasks);\n        rejectFunction = setAdPropertyFromString(rejectFunction, 2, profileData.tasks.entryIdCounter.setTimeoutWrapper());\n        rejectFunction = setAdPropertyFromString(rejectFunction, 3, profileData.tasks.entryIdCounter.tasks());\n        profileData = setAdPropertyFromString(rejectFunction, 4, profileData.tasks.entryIdCounter.entryIdCounter());\n        rejectFunction = {};\n        profileData = (rejectFunction.pf = base64Encode(profileData.entryIdCounter()), rejectFunction);\n      } else {\n        profileData = {};\n      }\n      extendObject(resolveFunction, profileData);\n      extendObject(value, findEntry, CustomMap, resolveFunction, generatorWrapper());\n    }]);\n  };\n  var adRequestManager = getSingletonInstance(initAdRequestManager);\n  var currentWindow = null;\n  var emptyString = \"\";\n  var isBooleanFlag = false;\n  var generateUrlParams = function () {\n    var generatorWrapper = currentWindow || window;\n    if (!generatorWrapper) {\n      return \"\";\n    }\n    var value = [];\n    if (!generatorWrapper.location || !generatorWrapper.location.href) {\n      return \"\";\n    }\n    value.push(\"url=\" + encodeURIComponent(generatorWrapper.location.href.substring(0, 512)));\n    if (generatorWrapper.document && generatorWrapper.document.referrer) {\n      value.push(\"referrer=\" + encodeURIComponent(generatorWrapper.document.referrer.substring(0, 512)));\n    }\n    return value.join(\"&\");\n  };\n  function extractVersion() {\n    var generatorWrapper = \"av.default_js_unreleased_RCxx\".match(/_(\\d{8})_RC\\d+$/) || \"av.default_js_unreleased_RCxx\".match(/_(\\d{8})_\\d+_\\d+$/) || \"av.default_js_unreleased_RCxx\".match(/_(\\d{8})_\\d+\\.\\d+$/) || \"av.default_js_unreleased_RCxx\".match(/_(\\d{8})_\\d+_RC\\d+$/),\n      value;\n    if (((value = generatorWrapper) == null ? undefined : value.length) == 2) {\n      return generatorWrapper[1];\n    }\n    generatorWrapper = \"av.default_js_unreleased_RCxx\".match(/.*_(\\d{2})\\.(\\d{4})\\.\\d+_RC\\d+$/);\n    var CustomMap;\n    if (((CustomMap = generatorWrapper) == null ? undefined : CustomMap.length) == 3) {\n      return \"20\" + generatorWrapper[1] + generatorWrapper[2];\n    } else {\n      return null;\n    }\n  }\n  var determineSdkType = function () {\n    if (\"ima_html5_sdk\".includes(\"ima_html5_sdk\")) {\n      return {\n        createArrayIterator: \"ima\",\n        closureLibraryBase: null\n      };\n    } else {\n      if (\"ima_html5_sdk\".includes(\"ima_native_sdk\")) {\n        return {\n          createArrayIterator: \"nima\",\n          closureLibraryBase: null\n        };\n      } else {\n        if (\"ima_html5_sdk\".includes(\"admob-native-video-javascript\")) {\n          return {\n            createArrayIterator: \"an\",\n            closureLibraryBase: null\n          };\n        } else {\n          if (\"av.default_js_unreleased_RCxx\".includes(\"cast_js_sdk\")) {\n            return {\n              createArrayIterator: \"cast\",\n              closureLibraryBase: extractVersion()\n            };\n          } else {\n            if (\"av.default_js_unreleased_RCxx\".includes(\"youtube.player.web\")) {\n              return {\n                createArrayIterator: \"yw\",\n                closureLibraryBase: extractVersion()\n              };\n            } else {\n              if (\"av.default_js_unreleased_RCxx\".includes(\"outstream_web_client\")) {\n                return {\n                  createArrayIterator: \"out\",\n                  closureLibraryBase: extractVersion()\n                };\n              } else {\n                if (\"av.default_js_unreleased_RCxx\".includes(\"drx_rewarded_web\")) {\n                  return {\n                    createArrayIterator: \"r\",\n                    closureLibraryBase: extractVersion()\n                  };\n                } else {\n                  if (\"av.default_js_unreleased_RCxx\".includes(\"gam_native_web_video\")) {\n                    return {\n                      createArrayIterator: \"n\",\n                      closureLibraryBase: extractVersion()\n                    };\n                  } else {\n                    if (\"av.default_js_unreleased_RCxx\".includes(\"admob_interstitial_video\")) {\n                      return {\n                        createArrayIterator: \"int\",\n                        closureLibraryBase: extractVersion()\n                      };\n                    } else {\n                      return {\n                        createArrayIterator: \"j\",\n                        closureLibraryBase: null\n                      };\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  var sdkType = determineSdkType().createArrayIterator;\n  var sdkVersion = determineSdkType().closureLibraryBase;\n  var generateErrorObject = function (generatorWrapper, value) {\n    var CustomMap = {\n      sv: \"962\"\n    };\n    if (sdkVersion !== null) {\n      CustomMap.getIterator = sdkVersion;\n    }\n    CustomMap.cb = sdkType;\n    CustomMap.nas = globalAdContainersManager.entryIdCounter.length;\n    CustomMap.msg = generatorWrapper;\n    if (undefined !== value && (generatorWrapper = getMetricType(value))) {\n      CustomMap.iterateEntries = ip[generatorWrapper];\n    }\n    return CustomMap;\n  };\n  var isCustomMetricViewable = function (generatorWrapper) {\n    return generatorWrapper.lastIndexOf(\"custom_metric_viewable\", 0) == 0;\n  };\n  var getMetricType = function (generatorWrapper) {\n    var value = isCustomMetricViewable(generatorWrapper) ? \"custom_metric_viewable\" : generatorWrapper.toLowerCase();\n    return findKeyInObject(function (CustomMap) {\n      return CustomMap == value;\n    });\n  };\n  var metricNames = {\n    setElementSafeHtml: \"visible\",\n    createSchemeValidator: \"audible\",\n    hasFrameWithName: \"time\",\n    getDeviceType: \"timetype\"\n  };\n  var metricValidators = {\n    visible(generatorWrapper) {\n      return /^(100|[0-9]{1,2})$/.test(generatorWrapper);\n    },\n    audible(generatorWrapper) {\n      return generatorWrapper == \"0\" || generatorWrapper == \"1\";\n    },\n    timetype(generatorWrapper) {\n      return generatorWrapper == \"mtos\" || generatorWrapper == \"tos\";\n    },\n    time(generatorWrapper) {\n      return /^(100|[0-9]{1,2})%$/.test(generatorWrapper) || /^([0-9])+ms$/.test(generatorWrapper);\n    }\n  };\n  var ProfileMetrics = function () {\n    this.entryIdCounter = undefined;\n    this.tasks = false;\n    this.setTimeoutWrapper = 0;\n    this.createDeferred = -1;\n    this.handleAsync = \"tos\";\n  };\n  var parseCustomMetrics = function (generatorWrapper) {\n    try {\n      var value = generatorWrapper.split(\",\");\n      if (value.length > keysOfObject(metricNames).length) {\n        return null;\n      } else {\n        return reduceElements(value, function (CustomMap, findEntry) {\n          findEntry = findEntry.toLowerCase().split(\"=\");\n          if (findEntry.length != 2 || undefined === metricValidators[findEntry[0]] || !metricValidators[findEntry[0]](findEntry[1])) {\n            throw Error(\"Entry (\" + findEntry[0] + \", \" + findEntry[1] + \") is invalid.\");\n          }\n          CustomMap[findEntry[0]] = findEntry[1];\n          return CustomMap;\n        }, {});\n      }\n    } catch (CustomMap) {\n      return null;\n    }\n  };\n  var calculateMetricValue = function (generatorWrapper, value) {\n    if (undefined == generatorWrapper.entryIdCounter) {\n      return 0;\n    }\n    switch (generatorWrapper.handleAsync) {\n      case \"mtos\":\n        if (generatorWrapper.tasks) {\n          return calculateMaxVisibilityAtThreshold(value.entryIdCounter, generatorWrapper.entryIdCounter);\n        } else {\n          return calculateMaxVisibilityAtThreshold(value.tasks, generatorWrapper.entryIdCounter);\n        }\n      case \"tos\":\n        if (generatorWrapper.tasks) {\n          return calculateVisibilityAtThreshold(value.entryIdCounter, generatorWrapper.entryIdCounter);\n        } else {\n          return calculateVisibilityAtThreshold(value.tasks, generatorWrapper.entryIdCounter);\n        }\n    }\n    return 0;\n  };\n  var CustomMetric = function (generatorWrapper, value, CustomMap, findEntry) {\n    yearResetter.call(this, value, findEntry);\n    this.onFulfilled = generatorWrapper;\n    this.settlePromise = CustomMap;\n  };\n  inheritPrototype(CustomMetric, yearResetter);\n  CustomMetric.prototype.getAdId = function () {\n    return this.onFulfilled;\n  };\n  CustomMetric.prototype.isDone = function () {\n    return true;\n  };\n  CustomMetric.prototype.entryIdCounter = function (generatorWrapper) {\n    var value = generatorWrapper.getAdManager();\n    var CustomMap = generatorWrapper.getDuration();\n    return someElement(this.settlePromise, function (findEntry) {\n      if (undefined != findEntry.entryIdCounter) {\n        var iterateEntries = calculateMetricValue(findEntry, value);\n      } else {\n      "